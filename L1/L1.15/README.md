# Небольшой фрагмент кода — проблемы и решение

Рассмотреть следующий код и ответить на вопросы: к каким негативным последствиям он может привести и как это исправить?

Приведите корректный пример реализации.
```go
var justString string

func someFunc() {
  v := createHugeString(1 &lt;&lt; 10)
  justString = v[:100]
}

func main() {
  someFunc()
}
```
Вопрос: что происходит с переменной justString?

## ответ

строка в языке Го - это срез рун, поэтому даже укорочение ее до 100 байт, не очистит из памяти лишние байты

кроме того, делать глобальные переменные не принято писать и в других языках, потому что к ним можно обратиться из любого потока(возможна гонка данных) любой функции

### хорошее решение

``` go

func someFunc() string {
    v := createHugeString()        
    return string([]byte(v[:100]))  // копируем первые 100 байт, при выходе из функции сборщик очистит v
}

func main() {
    s := someFunc()
    fmt.Println(len(s)) // 100
}
```